<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="zebra_label_template">
        <t t-call="web.html_container">
            <t t-call="web.external_layout">
                <!-- CSS Styles Embedded -->
                <style>
                    .professional-label {
                        width: 60mm;
                        height: 40mm;
                        padding: 1mm;
                        font-family: 'Segoe UI', 'Arial', sans-serif;
                        text-align: center;
                        border: 0.2mm solid #e0e0e0;
                        box-sizing: border-box;
                        display: flex;
                        flex-direction: column;
                        justify-content: space-between;
                        background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
                        position: relative;
                        overflow: hidden;
                    }

                    .label-header {
                        background: linear-gradient(90deg, #2c3e50 0%, #3498db 100%);
                        color: white;
                        padding: 0.3mm;
                        margin: -1mm -1mm 1mm -1mm;
                        font-size: 6px;
                        font-weight: bold;
                        text-transform: uppercase;
                        letter-spacing: 0.5px;
                    }

                    .product-name {
                        font-size: 8px;
                        font-weight: 700;
                        line-height: 1.1;
                        color: #2c3e50;
                        margin: 0.5mm 0;
                        max-height: 10mm;
                        overflow: hidden;
                        display: -webkit-box;
                        -webkit-line-clamp: 2;
                        -webkit-box-orient: vertical;
                    }

                    .product-details {
                        font-size: 6px;
                        color: #5a6c7d;
                        margin: 0.3mm 0;
                        line-height: 1.2;
                    }

                    .barcode-container {
                        margin: 0.5mm auto;
                        padding: 0.5mm;
                        background: white;
                        border: 0.1mm solid #ddd;
                        border-radius: 1mm;
                        max-width: 55mm;
                    }

                    .price-tag {
                        background: linear-gradient(90deg, #27ae60 0%, #2ecc71 100%);
                        color: white;
                        padding: 0.5mm;
                        border-radius: 1mm;
                        font-size: 7px;
                        font-weight: bold;
                        margin: 0.5mm 0;
                        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
                    }

                    .qr-code {
                        position: absolute;
                        bottom: 0.5mm;
                        right: 0.5mm;
                        width: 8mm;
                        height: 8mm;
                        opacity: 0.8;
                    }

                    .warning-badge {
                        position: absolute;
                        top: 0.5mm;
                        right: 0.5mm;
                        background: #e74c3c;
                        color: white;
                        padding: 0.2mm 0.5mm;
                        border-radius: 1mm;
                        font-size: 5px;
                        font-weight: bold;
                    }

                    .company-logo {
                        height: 3mm;
                        margin-bottom: 0.5mm;
                        opacity: 0.7;
                    }
                </style>

                <t t-foreach="docs" t-as="product">
                    <div class="professional-label">
                        <!-- Header Strip -->
                        <div class="label-header">
                            <t t-esc="product.categ_id.name or 'PRODUCT LABEL'"/>
                        </div>

                        <!-- Company Logo (Optional) -->
                        <div t-if="company.logo" class="company-logo">
                            <img t-att-src="'data:image/png;base64,%s' % company.logo" 
                                 style="height: 3mm; max-width: 20mm;"/>
                        </div>

                        <!-- Product Name -->
                        <div class="product-name">
                            <t t-esc="product.name or 'UNNAMED PRODUCT'"/>
                        </div>

                        <!-- Product Details Grid -->
                        <div class="product-details">
                            <div t-if="product.default_code">
                                <strong>REF:</strong> <t t-esc="product.default_code"/>
                            </div>
                            <div t-if="product.barcode">
                                <strong>EAN-13:</strong> <t t-esc="product.barcode"/>
                            </div>
                            <div t-if="product.weight">
                                <strong>Weight:</strong> <t t-esc="'%.2f' % product.weight"/> kg
                            </div>
                        </div>

                        <!-- Barcode Section -->
                        <div class="barcode-container">
                            <img t-if="product.barcode" 
                                t-att-src="'/report/barcode/?type=Code128&amp;value=%s&amp;width=400&amp;height=30&amp;humanreadable=1' % product.barcode"
                                style="max-width: 50mm; height: 12mm; object-fit: contain;"
                                alt="Product Barcode"
                                onerror="this.style.display='none'"/>
                            <div t-else="" class="warning-badge">NO BARCODE</div>
                        </div>

                        <!-- Price & Stock Information -->
                        <div class="price-tag">
                            <t t-if="product.lst_price">
                                <t t-esc="'%.2f' % product.lst_price"/> DZD
                            </t>
                            <t t-else="">
                                PRICE ON REQUEST
                            </t>
                        </div>

                        <!-- QR Code for Quick Scanning -->
                        <div t-if="product.id" class="qr-code">
                            <img t-att-src="'/report/barcode/?type=QR&amp;value=%s&amp;width=80&amp;height=80' % product.id"
                                 style="width: 8mm; height: 8mm;"
                                 alt="QR Code"/>
                        </div>

                        <!-- Warning Badges -->
                        <t t-if="product.qty_available lt 10">
                            <div class="warning-badge">LOW STOCK</div>
                        </t>
                    </div>

                    <!-- Page Break for Multiple Labels -->
                    <div t-if="not product_last" style="page-break-after: always;"></div>
                </t>
            </t>
        </t>
    </template>
</odoo>